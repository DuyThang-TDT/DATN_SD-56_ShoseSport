@model FurryFriends.Web.ViewModels.ThanhToanResultViewModel
@{
    Layout = "_Layout";
}

@section Styles{
    <style>
        :root{
            --primary:#6366f1; --success:#10b981; --text:#0f172a; --muted:#64748b; --border:#e2e8f0;
        }
        .success-wrapper{ 
            max-width:960px; 
            margin:40px auto; 
            border-radius:28px; 
            overflow:hidden; 
            box-shadow:0 30px 60px rgba(0,0,0,.12);
            animation: slideInUp 0.6s ease-out;
        }
        .success-hero{ 
            background:linear-gradient(135deg,#22c55e 0%,#16a34a 50%,#10b981 100%); 
            color:#fff; 
            padding:36px 28px; 
            position:relative;
            overflow: hidden;
        }
        .success-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        .success-hero .icon{ 
            width:64px; 
            height:64px; 
            border-radius:18px; 
            background:rgba(255,255,255,.15); 
            display:flex; 
            align-items:center; 
            justify-content:center; 
            font-size:34px; 
            margin-right:16px;
            animation: bounce 2s infinite;
            position: relative;
            z-index: 1;
        }
        .success-hero .title{ 
            font-weight:900; 
            font-size:28px; 
            margin:0; 
            letter-spacing:.3px;
            position: relative;
            z-index: 1;
        }
        .success-hero .sub{ 
            opacity:.9; 
            margin-top:6px;
            position: relative;
            z-index: 1;
        }
        .success-body{ background:#fff; padding:26px; }
        .order-card{ 
            border:1px solid var(--border); 
            border-radius:18px; 
            padding:18px 20px; 
            display:flex; 
            align-items:center; 
            justify-content:space-between; 
            gap:16px;
            transition: all 0.3s ease;
            border-left: 4px solid var(--success);
        }
        .order-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .order-info{ color:var(--text); }
        .order-id{ font-weight:800; font-size:18px; }
        .order-total{ text-align:right; }
        .total-label{ color:var(--muted); font-weight:600; }
        .total-amount{ color:var(--success); font-weight:900; font-size:22px; }
        .actions{ display:flex; flex-wrap:wrap; gap:12px; margin-top:22px; }
        .btn-grad{ 
            padding:12px 18px; 
            border:none; 
            border-radius:12px; 
            color:#fff; 
            font-weight:800; 
            background:linear-gradient(135deg,#667eea,#764ba2); 
            text-decoration:none; 
            display:inline-flex; 
            align-items:center; 
            gap:8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .btn-ghost{ 
            padding:12px 18px; 
            border:2px solid var(--border); 
            border-radius:12px; 
            color:var(--text); 
            font-weight:800; 
            background:#fff; 
            text-decoration:none; 
            display:inline-flex; 
            align-items:center; 
            gap:8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .btn-grad:hover, .btn-ghost:hover{ 
            transform:translateY(-2px); 
            box-shadow:0 8px 25px rgba(0,0,0,.15); 
            text-decoration:none; 
        }
        .btn-grad:disabled, .btn-ghost:disabled{ opacity:0.6; cursor:not-allowed; transform:none; }
        .loading-spinner{ width:16px; height:16px; border:2px solid #ffffff40; border-top:2px solid #fff; border-radius:50%; animation:spin 1s linear infinite; }
        .hint{ 
            color:var(--muted); 
            margin-top:20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 4px solid var(--success);
            text-align: center;
        }
        
        @@keyframes spin{ 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }
        @@keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        @@keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        @@keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        
        @@media (max-width:768px){ 
            .order-card{ flex-direction:column; align-items:flex-start; } 
            .order-total{ text-align:left; } 
            .actions{flex-direction:column;} 
            .btn-grad, .btn-ghost{justify-content:center;} 
        }
    </style>
}

<div class="success-wrapper">
    <div class="success-hero d-flex align-items-center">
        <div class="icon"><i class="fas fa-check"></i></div>
        <div>
            <div class="title">Đặt hàng thành công</div>
                            <div class="sub">Cảm ơn bạn đã tin tưởng FuryFriend! Chúng tôi sẽ liên hệ giao hàng sớm.</div>
        </div>
    </div>
    <div class="success-body">
        <div class="order-card">
            <div class="order-info">
                <div class="text-muted">Mã đơn hàng</div>
                <div class="order-id" id="orderId">@Model.HoaDonId</div>
            </div>
            <div class="order-total">
                <div class="total-label">Tổng thanh toán</div>
                <div class="total-amount">@Model.TongTienSauKhiGiam.ToString("N0") VNĐ</div>
            </div>
        </div>

        <div class="actions">
            <a href="@Url.Action("Index","DonHang")" class="btn-grad"><i class="fas fa-list-alt"></i> Quản lý đơn hàng</a>

            <a href="@Url.Action("Index","SanPhamKhachHang")" class="btn-ghost"><i class="fas fa-shopping-bag"></i> Tiếp tục mua sắm</a>
            <button class="btn-ghost" id="copyBtn"><i class="fas fa-copy"></i> Sao chép mã đơn</button>
        </div>
        <div class="hint"><i class="fas fa-truck"></i> Đơn hàng sẽ được xử lý trong giờ hành chính. Bạn sẽ nhận thông báo khi trạng thái thay đổi.</div>
    </div>
    
</div>

@section Scripts{
    <script>
        // Làm trống badge giỏ hàng sau khi thanh toán
        if (window.setCartCount) window.setCartCount(0);
        
        // Sao chép mã đơn
        document.getElementById('copyBtn')?.addEventListener('click', ()=>{
            const id = document.getElementById('orderId')?.textContent?.trim();
            if (!id) return;
            navigator.clipboard?.writeText(id);
            alert('Đã sao chép mã đơn: ' + id);
        });

 
    </script>
}
